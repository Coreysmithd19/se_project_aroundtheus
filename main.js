!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardEl.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardEl.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleDeleteCard(){this._cardEl.remove(),this._cardEl=null}_handleLikeIcon(){this._cardEl.querySelector(".card__like-button").classList.toggle("card__like-button-active")}getView(){return this._cardEl=this._getTemplate(),this._cardEl.querySelector(".card__title").textContent=this._name,this._cardImageElement=this._cardEl.querySelector(".card__image"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._cardEl}}var t=class{constructor(e,t){this._config=e,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(e){this._hasInvalidInput(e)?this.disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._config.inputSelector)],this._submitButton=this._form.querySelector(this._config.submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;this.popupElement=document.querySelector(t),this.openedModal=document.querySelector(".modal_opened"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this.popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListners(){this.popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this.popupForm=this.popupElement.querySelector(".modal__form"),this.handleFormSubmit=t}_getInputValues(){const e=this.popupForm.querySelectorAll(".modal__form-input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListners(),this.popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.handleFormSubmit(this._getInputValues()),e.target.reset(),super.close()}))}}const r={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__popup_input_type_error",errorClass:"modal__popup_error_visible"},o=document.querySelector("#profile__edit-button"),i=document.querySelector("#profile__edit-modal"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),c=document.querySelector("#profile-title-input"),u=document.querySelector("#profile-description-input"),d=(i.querySelector("#modal-closed-button"),i.querySelector(".modal__form")),m=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list"),document.querySelector(".profile__add-button")),_=document.querySelector("#add-card-modal"),p=(_.querySelector("#modal-closed-button"),document.querySelector("#preview-image")),h=(document.querySelector(".modal__image"),p.querySelector("#modal-closed-button"),document.querySelector(".modal__title"),_.querySelector("#add-card-form"));h.querySelector("#place-title"),h.querySelector("#place-image");const E=new class extends s{constructor(e){super({popupSelector:e}),this.previewImage=document.querySelector(".modal__imgae_popup"),this.previewImageTitle=document.querySelector(".modal__title")}open(e){this.previewImage.src=e.link,this.previewImage.alt=e.name,this.previewImageTitle.textContent=e.name,super.open()}}("#preview-image");function S(e){E.open({name:e.name,link:e.link})}function v(t){const s=function(t){return new e(t,"#card-template",S).getView()}(t);q.addItem(s)}E.setEventListners();const f=new n("#profile__edit-modal",(function(e){let{title:t,description:s}=e;y.setUserInfo(t,s)})),g=new n("#add-card-modal",(function(e){let{name:t,url:s}=e;v({name:t,link:s})})),y=new class{constructor(e,t){this._profiletitle=e,this._profiledescription=t}getUserInfo(){return{name:this._profiletitle.textContent,job:this._profiledescription.textContent}}setUserInfo(e,t){this._profiletitle.textContent=e,this._profiledescription.textContent=t}}(a,l),b=new t(r,d),w=new t(r,h);b.enableValidation(),w.enableValidation(),f.setEventListeners(),g.setEventListeners(),o.addEventListener("click",(()=>{const e=y.getUserInfo();c.value=e.name,u.value=e.job,f.open()})),m.addEventListener("click",(()=>{g.open()}));const q=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:v},".cards__list");q.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQVEwQixHQUNOdEksS0FBS29JLFdBQVdHLFFBQVFELEVBQzFCLEdIOEZBLENBQ0VOLE1EOUd1QixDQUN6QixDQUNBbEksS0FBSyxrQkFDTEMsS0FBSyxzR0FFTCxDQUNBRCxLQUFLLGNBQ0xDLEtBQUsseUdBRUwsQ0FDQUQsS0FBSyxpQkFDTEMsS0FBSyw0R0FFTCxDQUNBRCxLQUFLLFVBQ0xDLEtBQUsscUdBRUwsQ0FDQUQsS0FBSyxnQkFDTEMsS0FBSyxxR0FFTCxDQUNBRCxLQUFLLGlCQUNMQyxLQUFLLG1HQ3dGSGtJLFNBQVUxQixHQUVaLGdCQUVKSSxFQUFZMEIsYSIsInNvdXJjZXMiOlsid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlcmluZm8uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljazs7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gIFxyXG4gICAgICB0aGlzLl9jYXJkRWxcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIilcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICB9KTtcclxuICBcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gIFxyXG4gICAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbC5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5fY2FyZEVsID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsXHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICBcclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgIHRoaXMuX2NhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gIFxyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2FyZEVsO1xyXG4gICAgfVxyXG4gIH0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xyXG4gICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgICBpZighaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpIHtcclxuICAgIHJldHVybiBpbnB1dEVscy5zb21lKGlucHV0RWwgPT4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuICBcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzKSB7XHJcbiAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpKSB7XHJcbiAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcildO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaChpbnB1dEVsID0+IHtcclxuICAgICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxzKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuXHJcbiAiLCIgZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3J9KSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5vcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuICgpIHtcclxuICAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSAoKSB7XHJcbiAgICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICBcclxuICAgIHNldEV2ZW50TGlzdG5lcnMoKSB7XHJcbiAgICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSB8fFxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KXtcclxuICAgICAgICBzdXBlcih7cG9wdXBTZWxlY3Rvcn0pXHJcbiAgICAgICAgdGhpcy5wb3B1cEZvcm0gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdFxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLnBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgICAgICBpbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgZS50YXJnZXQucmVzZXQoKTtcclxuICAgICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIH1cclxuIiwiIGV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICBuYW1lOlwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOlwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICBuYW1lOlwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgIG5hbWU6XCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazpcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgbmFtZTpcIkxhdGVtYXJcIixcclxuICAgIGxpbms6XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgbmFtZTpcIk5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgbmFtZTpcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOlwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19wb3B1cF9pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19wb3B1cF9lcnJvcl92aXNpYmxlXCIsXHJcbiAgfTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcblxyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcblxyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcblxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiXHJcblxyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCJcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VyaW5mby5qc1wiO1xyXG5pbXBvcnQge2luaXRpYWxDYXJkcyxjb25maWd9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIlxyXG5cclxuXHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jbG9zZWQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKVxyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uQ2xvc2UgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jbG9zZWQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcclxuY29uc3QgcHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZUJ1dHRvbkNsb3NlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jbG9zZWQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwbGFjZS10aXRsZVwiKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwbGFjZS1pbWFnZVwiKTtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiAsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZVwiKTtcclxuXHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdG5lcnMoKTtcclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgbmFtZTogZGF0YS5uYW1lLCBsaW5rOiBkYXRhLmxpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuXHJcblxyXG5jb25zdCBwb3B1cFdpdGhFZGl0UHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlTmV3Q2FyZFN1Ym1pdFxyXG4pO1xyXG5cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uKVxyXG5cclxuXHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKCBjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSApO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoIGNvbmZpZywgYWRkQ2FyZEZvcm0gKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHt0aXRsZSwgZGVzY3JpcHRpb24gfSl7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQoeyBuYW1lLCB1cmwgfSkge1xyXG4gIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rOiB1cmwgfSwgY2FyZExpc3RFbCk7XHJcbn1cclxuXHJcbnBvcHVwV2l0aEVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcclxuXHJcbiAgcG9wdXBXaXRoRWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiAsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcblxyXG5cclxuICBjb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICAgIH0sXHJcbiAgICBcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgc3VwZXIoe3BvcHVwU2VsZWN0b3J9KVxyXG4gICAgICAgdGhpcy5wcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWdhZV9wb3B1cFwiKTtcclxuICAgICAgIHRoaXMucHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGRhdGEpIHtcclxuICAgICAgIHRoaXMucHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgICAgIHRoaXMucHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgICAgIHRoaXMucHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyaW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxldGl0bGUgLHByb2ZpbGVkZXNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGV0aXRsZSA9IHByb2ZpbGV0aXRsZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlZGVzY3JpcHRpb24gPSBwcm9maWxlZGVzY3JpcHRpb247XHJcbiAgICB9O1xyXG5cclxuICAgIGdldFVzZXJJbmZvKCl7XHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9wcm9maWxldGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGpvYjogdGhpcy5fcHJvZmlsZWRlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKXtcclxuICAgICAgICB0aGlzLl9wcm9maWxldGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZSxcclxuICAgICAgICB0aGlzLl9wcm9maWxlZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvblxyXG4gICAgfTtcclxuXHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IFxyXG4gICAgfVxyXG4gIFxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgICB9XHJcbiAgfSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiY29uZmlnIiwiZm9ybUVsIiwiX2NvbmZpZyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0RWxzIiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwicG9wdXBFbGVtZW50Iiwib3BlbmVkTW9kYWwiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Iiwic2V0RXZlbnRMaXN0bmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsInBvcHVwRm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGROZXdDYXJkQnV0dG9uIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhZGRDYXJkTW9kYWwiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImFkZENhcmRGb3JtIiwicG9wdXBXaXRoSW1hZ2UiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3SW1hZ2VUaXRsZSIsImRhdGEiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwicG9wdXBXaXRoRWRpdFByb2ZpbGVGb3JtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdDYXJkUG9wdXAiLCJfcmVmMiIsInVybCIsInByb2ZpbGV0aXRsZSIsInByb2ZpbGVkZXNjcmlwdGlvbiIsIl9wcm9maWxldGl0bGUiLCJfcHJvZmlsZWRlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidXNlckRhdGEiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJlcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=